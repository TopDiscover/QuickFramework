# 公共组件
## 1，声音组件AudioComponent
集成了对声音的播放，停止，音量大小调整等功能
该声音组件会在UIView的onLoad中初始化，每一个UIView都具有播放声音的组件
- 背景音乐,如果是在onLoad中播放，必须先调用基类的onLoad后再使用this.audioHelper，
目前只支持一个背景音乐的播放，当playMusic下一个音乐时，会自动停止掉之前的背景音乐，播放当前背景音乐
如某些资源希望播放后，一直驻留在内存中，可使用Manager.globalAudio来对声音进行操作，该声音全局组件
播放的资源，都会默认为全局常驻资源，生命周期跟App的生命周期一致
```ts
//播放背景音乐，
this.audioHelper.playMusic("audio/background",this.bundle);
//停止背景音乐
this.audioHelper.stopMusic()
//播放全局背景音乐，前提，该背景音效文件在主包内，否则可能会出现退出bundle删除bundle资源，造成第二次无法正常播放
//可直接使用全局声音组件，这种情况下播放的音乐，将会一直驻留在内存中，直接游戏退出才会释放
Manager.globalAudio.playMusic("audio/background",this.bundle);
//使用全局播放，使用全局的停止
Manager.globalAudio.stopMusic()
```
- 音效，音效的返回是一个异步处理的过程，如果没有加载音效情况下，调用播放接口会先加载完成才会播放，在Promise回调中返回音效id
```ts
//播放音效
this.audioHelper.playEffect("audiourl",this.bundle,false).then((id)=>{
    this.audioID = id;
});
//停止音效
this.audioHelper.stopEffect(this.audioID);
//如弹出框的公共声音，可直接使用全局的声音组件操作Manager.globalAudio
```
- 音量
音量的设置是对全局进行设置，全局的声音组件及UIView的声音组件都能操作当前游戏的音量设置
```ts
//音效音量
this.audioHelper.effectVolume = value; //value(0.0~1.0)
//背景音乐音量
this.audioHelper.musicVolume = value; //value(0.0~1.0)
```
- 声音开关
声音开关的设置，同音量一样，全局的声音组件及UIView的声音组件都能操作当前游戏的音量开关设置
```ts
//音效开关
this.audioHelper.isEffectOn = true;
//背景音效开关
this.audioHelper.isMusicOn = true;
```
- 声音用户数据保存,全局的声音组件及UIView的声音组件都能操作当前游戏的用户数据保存
```ts
this.audioHelper.save()
```
## 2，网络控制器Controller
个人建议，该模块只用于对网络数据的接收逻辑业务的处理，如果当你收到某个网络消息右，处理完相关数据流程在通知视图更新显示，
- service注入，该组件接收来自哪一条网络的
- 网络事件注册绑定
- 网络控制器注册到网络管理器中
示例如下:
```ts
//网络注入
@setService(ChatService.instance)
export default class TestChatNetController extends Controller<ChatService> {
    //绑定网络事件
    protected addEvents() {
        super.addEvents()
        this.addNetEvent(GetCmdKey(MainCmd.CMD_LOBBY, SUB_CMD_LOBBY.TEST_JSON_MSG), this.onTestJsonMessage, TestJsonMessage, true);
    }
    //网络事件处理
    private onTestJsonMessage(data: TestJsonMessage) {
        //对网络数据进入处理之后，得到界面需要结果
        if ( Manager.gameView) Manager.gameView.updateView(data);
        //如需要其它方便收到此消息的数据，可派发广播，如果玩家金钱变更等，根据自己的业务逻辑而定
        dispatch(CommonEvent.TEST_JSON_MSG, data.hello);
    }
}

Manager.hallNetManager.register(TestChatNetController);
```
## 3，事件组件EventComponent
该组件主要用于对网络及UI事件的绑定，只要是EventComponent的子类，都有接收全局广播事件的能力
# 框架核心
## 1，适配器
目前框架的屏幕适配方案为，背景使用widegt组件，拉伸背景铺满屏幕，显示节点按自己项目的固定分辨率居中于屏幕，当屏幕大小发生变化时，动态适配，
- 当屏幕的分辨率等于设计的分辨率时，正常适配
- 当屏幕的分辨率小于设计的分辨率时，会出现上下黑边
- 当屏幕的分辨率大于设计的分辨率但不超过最大限制时，会拉伸背景铺满屏幕，显示节点按项目的设计分辨率剧中显示
- 当屏幕的分辨率大于设计的分辨率但超过了最大的限制，以最大支持的分辨率进行适配
## 2，资源管理模块
- 资源管理器
    - 远程资源加载，目前只扩展了对远程图片加载，及远程sp.SkeletonData的加载，加载后的资源会自动的添加到【资源缓存管理器】中。
    - 本地资源加载，只能加载resources 及各bundle中的资源，加载完成后的资源也会自动的缓存到【资源缓存管理器】中。
- Bundle管理器
    - 对Bundle的加载及热更新检查的相关操作
- 资源缓存管理器
    - 资源管理器加载过的所有资源都会缓存在该管理器中
- 资源加载器
    - 提供了一个资源加载器，主要用于再进入模块Logic中，加载该模块需要的资源
