{"version":3,"sources":["../source/PhoneNumberMatcher.test.js"],"names":["PhoneNumberMatcher","metadata","test","text","defaultCountry","expectedNumbers","nationalNumber","matcher","v2","hasNext","number","next","phoneNumber","shift","startsAt","undefined","should","equal","endsAt","country","length","describe","it"],"mappings":"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","sourcesContent":["import PhoneNumberMatcher from './PhoneNumberMatcher'\r\nimport metadata from '../metadata.min.json'\r\n\r\nfunction test(text, defaultCountry, expectedNumbers) {\r\n\tif (typeof expectedNumbers === 'string') {\r\n\t\texpectedNumbers = [{\r\n\t\t\tnationalNumber: expectedNumbers\r\n\t\t}]\r\n\t}\r\n\tconst matcher = new PhoneNumberMatcher(text, { defaultCountry, v2: true }, metadata)\r\n\twhile (matcher.hasNext()) {\r\n\t\tconst number = matcher.next()\r\n\t\tconst phoneNumber = expectedNumbers.shift()\r\n\t\tif (phoneNumber.startsAt !== undefined) {\r\n\t\t\tnumber.startsAt.should.equal(phoneNumber.startsAt)\r\n\t\t}\r\n\t\tif (phoneNumber.endsAt !== undefined) {\r\n\t\t\tnumber.endsAt.should.equal(phoneNumber.endsAt)\r\n\t\t}\r\n\t\tnumber.number.country.should.equal(phoneNumber.country || defaultCountry)\r\n\t\tnumber.number.nationalNumber.should.equal(phoneNumber.nationalNumber)\r\n\t}\r\n\texpectedNumbers.length.should.equal(0)\r\n}\r\n\r\ndescribe('PhoneNumberMatcher', () => {\r\n\tit('should find phone numbers', () => {\r\n\t\ttest(\r\n\t\t\t'The number is +7 (800) 555-35-35 and not (213) 373-4253 as written in the document.',\r\n\t\t\t'US',\r\n\t\t\t[{\r\n\t\t\t\tcountry: 'RU',\r\n\t\t\t\tnationalNumber: '8005553535',\r\n\t\t\t\tstartsAt: 14,\r\n\t\t\t\tendsAt: 32\r\n\t\t\t}, {\r\n\t\t\t\tcountry: 'US',\r\n\t\t\t\tnationalNumber: '2133734253',\r\n\t\t\t\tstartsAt: 41,\r\n\t\t\t\tendsAt: 55\r\n\t\t\t}]\r\n\t\t)\r\n\t})\r\n\r\n\tit('should find phone numbers from Mexico', () => {\r\n\t\t// Test parsing fixed-line numbers of Mexico.\r\n\t\ttest('+52 (449)978-0001', 'MX', '4499780001')\r\n\t\ttest('01 (449)978-0001', 'MX', '4499780001')\r\n\t\ttest('(449)978-0001', 'MX', '4499780001')\r\n\t\t// Test parsing mobile numbers of Mexico.\r\n\t\ttest('+52 1 33 1234-5678', 'MX', '3312345678')\r\n\t\ttest('044 (33) 1234-5678', 'MX', '3312345678')\r\n\t\ttest('045 33 1234-5678', 'MX', '3312345678')\r\n\t})\r\n\r\n\tit('should find phone numbers from Argentina', () => {\r\n\t\t// Test parsing mobile numbers of Argentina.\r\n\t\ttest('+54 9 343 555 1212', 'AR', '93435551212')\r\n\t\ttest('0343 15-555-1212', 'AR', '93435551212')\r\n\r\n\t\ttest('+54 9 3715 65 4320', 'AR', '93715654320')\r\n\t\ttest('03715 15 65 4320', 'AR', '93715654320')\r\n\r\n\t\t// Test parsing fixed-line numbers of Argentina.\r\n\t\ttest('+54 11 3797 0000', 'AR', '1137970000')\r\n\t\ttest('011 3797 0000', 'AR', '1137970000')\r\n\r\n\t\ttest('+54 3715 65 4321', 'AR', '3715654321')\r\n\t\ttest('03715 65 4321', 'AR', '3715654321')\r\n\r\n\t\ttest('+54 23 1234 0000', 'AR', '2312340000')\r\n\t\ttest('023 1234 0000', 'AR', '2312340000')\r\n\t})\r\n})"],"file":"PhoneNumberMatcher.test.js"}